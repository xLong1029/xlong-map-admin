import{s$ as Ct,la as Ut,vb as $t,dy as Et,ok as Nt,v as Lt,uO as At,jP as Tt,vc as Dt,rD as ot,vd as g,r as y,n1 as S,ak as Mt,i as m,ve as kt,fD as Zt,vf as jt,vg as Yt,aR as Ht,e as s,y as l,b as j,cH as qt,Y as Ft,v4 as Bt,vh as It,vi as Vt,tv as Jt,w as st,a as Y,g as Qt,H as Wt,vj as lt,n as Xt,eN as Kt,ad as $,oL as te,ab as ee,G as pt,vk as ie,vl as oe,vm as re,vn as ae,cP as ne,aP as q,vo as ct,mG as ht,aQ as F,vp as ut,oO as Gt,cB as L,oo as H,oi as dt,vq as se,vr as le,mz as pe,cT as X,mY as yt,n2 as x,hX as O,l6 as gt,l7 as ce,iu as he,i6 as vt,pb as ue,n7 as K}from"./index.a33ecea7.js";import{b as M,U as k,a as ft,p as mt}from"./quantityFormatUtils.f35d4e58.js";import{t as B,m as de,a as tt,b as ye,g as J}from"./automaticLengthMeasurementUtils.fa72e8ed.js";import{i as wt}from"./automaticAreaMeasurementUtils.f39d02ec.js";function U(t,e){const a=new Ht({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(a.z=t[2]),a}function ge(t,e){return new Ct({points:t,spatialReference:e})}function xt(t,e,a){const o=new Ut({paths:t,spatialReference:e});return a&&$t(o),o}function Z(t,e,a,o=!0){const r=Et(t);r.forEach(n=>{const p=n[0],c=n[n.length-1];Nt(p,c)&&n.length!==1||n.push(n[0])});let i=new Lt({rings:r,spatialReference:e});return i.rings.forEach(n=>{At(n,!1,!1)||n.reverse()}),a&&$t(i),o&&i.isSelfIntersecting&&Tt(e)&&(i=Dt(i)),i}function _t(t,e,a){const o=e.mapToLocalMultiple(t),r=[],i={x:o[0].x,y:o[0].y},n={x:o[1].x,y:o[1].y},p=Math.round(n.x-i.x),c=Math.round(n.y-i.y),u=Math.max(Math.abs(p),Math.abs(c));if(a){const d={x:i.x+u,y:i.y+u},v={x:i.x-u,y:i.y-u};r.push(g(d.x,v.y),g(v.x,v.y),g(v.x,d.y),g(d.x,d.y))}else{const d={x:p>0?i.x+u:i.x-u,y:c>0?i.y+u:i.y-u};r.push(g(i.x,i.y),g(d.x,i.y),g(d.x,d.y),g(i.x,d.y))}return zt(Z([ot(r.map(d=>e.localToMap(d)))],e.spatialReference,e.doUnnormalization,!0),r,e)}function ve(t,e,a){let o=e.mapToLocalMultiple(t);if(o.length===1){const c=o[0];o=[g(c.x-48,c.y+48),g(c.x+48,c.y-48),g(c.x+48,c.y-48),g(c.x-48,c.y+48)]}const r=[],i={x:o[0].x,y:o[0].y},n={x:o[1].x,y:o[1].y};if(a){const p=Math.round(n.x-i.x),c=Math.round(n.y-i.y);r.push(g(i.x-p,i.y-c),g(n.x,i.y-c),g(n.x,n.y),g(i.x-p,n.y))}else r.push(g(i.x,i.y),g(n.x,i.y),g(n.x,n.y),g(i.x,n.y));return zt(Z([ot(r.map(p=>e.localToMap(p)))],e.spatialReference,e.doUnnormalization,!0),r,e)}function zt(t,e,a){const o=Q(e[3],e[2],a),r=Q(e[1],e[2],a),i=Q(e[0],e[1],a),n=Q(e[0],e[3],a);return{geometry:t,midpoints:y(o)&&y(r)&&y(i)&&y(n)?{top:o,right:r,bottom:i,left:n}:null}}function Q(t,e,a){A[0]=t.x,A[1]=t.y,A[2]=0,D[0]=e.x,D[1]=e.y,D[2]=0,S(A,A,D,.5),W.x=A[0],W.y=D[1],W.z=D[2];const o=a.localToMap(W);return y(o)?U(o,a.spatialReference):null}const W=g(0,0,0),A=Mt(),D=Mt();function Ot(t,e,a,o){const r=e.mapToLocalMultiple(t);let i=null,n=null;if(a)i=r[0],n=r[1];else{const f=r[0],_=r[1],E=Math.round(_.x-f.x),N=Math.round(_.y-f.y),b=Math.max(Math.abs(E),Math.abs(N));i=g(E>0?f.x+b/2:f.x-b/2,N>0?f.y+b/2:f.y-b/2),n=g(Math.abs(E)>Math.abs(N)?i.x-b/2:i.x,Math.abs(E)>Math.abs(N)?i.y:i.y-b/2)}const p=e.localToMap(i),c=e.localToMap(n);if(m(p)||m(c))return null;e.doUnnormalization&&kt([[p,c]],e.spatialReference);const u=U(p,e.spatialReference),d=U(c,e.spatialReference),v=Zt(e.spatialReference);let w=0;if(Tt(e.spatialReference))w=v*jt(u,d,null);else{const f=i.x-n.x,_=i.y-n.y;w=v*Math.sqrt(f*f+_*_)*(o||1)}const R=new Yt({center:u,radius:w,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:Z(R.rings,R.spatialReference,!1),center:u,edge:d}}function fe(t,e,a){const o=e.mapToLocalMultiple(t),r=o[0],i=o[1],n=Math.round(i.x-r.x),p=Math.round(i.y-r.y),c=g(a?r.x:r.x+n/2,a?r.y:r.y+p/2),u=a?n:n/2,d=a?p:p/2,v=60,w=[],R=2*Math.PI/v;function f(I){const St=Math.cos(I),Pt=Math.sin(I);return g(u*St+c.x,d*Pt+c.y)}for(let I=0;I<v;I++)w.push(f(I*R));w.push(w[0]);const{spatialReference:_,doUnnormalization:E}=e,N=Z([ot(w.map(I=>e.localToMap(I)))],_,E,!1),b=e.localToMap(f(Math.PI/2)),rt=e.localToMap(f(0)),at=e.localToMap(f(-Math.PI/2)),nt=e.localToMap(f(Math.PI));return{geometry:N,midpoints:y(b)&&y(rt)&&y(at)&&y(nt)?{top:U(b,_),right:U(rt,_),bottom:U(at,_),left:U(nt,_)}:null}}function et(t,e){switch(t){case"point":case"multipoint":return"point";case"polyline":return(y(e)&&e.type==="polyline"&&e.paths.length?e.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex";case"polygon":{const a=y(e)&&e.type==="polygon"&&e.rings.length?e.rings[0].length:0;return a<3?"polylineZeroVertices":a<4?"polygonOneVertex":"polygonTwoVertices"}default:return}}let P=class extends B{constructor(t){super(t),this.type="draw-point",this.helpMessage=void 0}};s([l()],P.prototype,"type",void 0),s([l()],P.prototype,"elevation",void 0),s([l()],P.prototype,"viewType",void 0),s([l()],P.prototype,"helpMessage",void 0),P=s([j("esri.views.interactive.tooltip.DrawPointTooltipInfo")],P);let V=class extends B{constructor(t){super(t),this.type="draw-polyline",this.totalLength=M,this.helpMessage=void 0}};s([l()],V.prototype,"type",void 0),s([l()],V.prototype,"elevation",void 0),s([l()],V.prototype,"totalLength",void 0),s([l()],V.prototype,"viewType",void 0),s([l()],V.prototype,"helpMessage",void 0),V=s([j("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],V);let G=class extends B{constructor(t){super(t),this.type="draw-polygon",this.area=k,this.helpMessage=void 0}};s([l()],G.prototype,"type",void 0),s([l()],G.prototype,"elevation",void 0),s([l()],G.prototype,"area",void 0),s([l()],G.prototype,"viewType",void 0),s([l()],G.prototype,"helpMessage",void 0),G=s([j("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],G);let C=class extends B{constructor(t){super(t),this.type="draw-rectangle",this.xSize=M,this.ySize=M,this.area=k}};s([l()],C.prototype,"type",void 0),s([l()],C.prototype,"xSize",void 0),s([l()],C.prototype,"ySize",void 0),s([l()],C.prototype,"area",void 0),C=s([j("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],C);let z=class extends B{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=k}};s([l()],z.prototype,"type",void 0),s([l()],z.prototype,"radius",void 0),s([l()],z.prototype,"xSize",void 0),s([l()],z.prototype,"ySize",void 0),s([l()],z.prototype,"area",void 0),z=s([j("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],z);let h=class extends qt(Ft.EventedMixin(Bt)){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new It,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new Vt}initialize(){this.internalGraphicsLayer=new Jt({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",t=>this.onVertexAdd(t)),this.drawOperation.on("vertex-remove",t=>this.onVertexRemove(t)),this.drawOperation.on("vertex-update",t=>this.onVertexUpdate(t)),this.drawOperation.on("cursor-update",t=>this.onCursorUpdate(t)),this.drawOperation.on("complete",t=>this.onComplete(t)),st(()=>this.tooltipOptions.enabled,t=>{this.tooltip=t?new ye({view:this.view,info:this._tooltipInfo}):Y(this.tooltip)},pt),st(()=>this._tooltipInfo,t=>{y(this.tooltip)&&(this.tooltip.info=t)},pt)]),this.finishToolCreation()}destroy(){this.drawOperation=Y(this.drawOperation),this.tooltip=Y(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=Y(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){return ft(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),y(this._graphic)&&(this._graphic.symbol=t)}get updating(){var t,e;return(e=(t=this.drawOperation)==null?void 0:t.updating)!=null?e:!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(t){this._graphic=new Qt({...this.graphicProperties,geometry:t,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(Wt(()=>{y(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=Y(this._graphic))}),it)}_destroyAllVisualisations(){this.handles.remove(T.outline),this.handles.remove(T.regularVertices),this.handles.remove(T.activeVertex),this.handles.remove(it)}_getCreateOperationGeometry(t={operationComplete:!1}){if(this.drawOperation==null||this.drawOperation.numVertices===0)return null;const e=this.drawOperation.stagedVertex,a=this.drawOperation.committedVertices,o=a.slice();y(e)&&o.push(this.drawOperation.coordinateHelper.pointToArray(e));const r=y(e)?this.drawOperation.coordinateHelper.pointToArray(e):a.splice(-1)[0],i={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null},n=o.length,p=this.view.spatialReference,c=this.view.type==="3d"&&this.view.viewingMode==="global";switch(this.geometryType){case"point":i.regularVertices=a,i.activeVertex=r,i.full=this.drawOperation.coordinateHelper.arrayToPoint(o[0]);break;case"multipoint":i.regularVertices=a,i.activeVertex=r,n>0&&(i.full=ge(o,p));break;case"polyline":i.regularVertices=a,i.activeVertex=r,n>0&&(i.full=xt([o],p,c));break;case"polygon":i.regularVertices=a,i.activeVertex=r,n>0&&(i.full=Z([o],p,c,!0));break;case"circle":if(n>0){const u=lt(this.view,o[0]);if(n===1&&t.operationComplete){const d=o[0],v=u.makeMapPoint(d[0]+bt*this.view.resolution,d[1]);i.circle=Ot([d,v],u,!0),i.full=y(i.circle)?i.circle.geometry:null}else n===2&&(this.forceUniformSize?(i.circle=Ot(o,u,this.centered),i.full=y(i.circle)?i.circle.geometry:null):(i.rectangle=fe(o,u,this.centered),i.full=i.rectangle.geometry))}break;case"rectangle":if(n>0){const u=lt(this.view,o[0]);if(n===1&&t.operationComplete){const d=o[0],v=u.makeMapPoint(d[0]+bt*this.view.resolution,d[1]);i.rectangle=_t([d,v],u,!0),i.full=i.rectangle.geometry}else n===2&&(i.rectangle=this.forceUniformSize?_t(o,u,this.centered):ve(o,u,this.centered),i.full=i.rectangle.geometry)}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":n>1&&(i.outline=xt([o],p,c));break;case"circle":case"rectangle":y(i.full)&&i.full.type==="polygon"&&(i.outline=Z(i.full.rings,p,c))}return i}initializeGraphic(t){return null}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const a=this._getCreateOperationGeometry({operationComplete:!0});y(a)&&(m(this._graphic)?this._createGraphic(a.full):this._graphic.geometry=a.full,e=Xt(this._graphic).clone())}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(t){this._updateGraphic(),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,m(t)?this._destroyAllVisualisations():(y(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),T.outline):this.handles.remove(T.outline),y(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),T.regularVertices):this.handles.remove(T.regularVertices),y(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),T.activeVertex):this.handles.remove(T.activeVertex),y(t.full)?m(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(it))}get _tooltipInfo(){const{drawOperation:t}=this;if(!t)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;default:return null}}get _drawPointTooltipInfo(){const t=Kt(this.graphic,e=>e.geometry);return m(t)||t.type!=="point"||this.view.type==="2d"&&this.defaultZ===0?null:new P({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:this.view.type,helpMessage:et("point",t)})}get _drawPolylineTooltipInfo(){const t=this._createOperationGeometry,e=y(t)?t.full:null;if(m(e)||e.type!=="polyline")return null;const a=de(e,this._elevationMode);return new V({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:$(a,M),viewType:this.view.type,helpMessage:et("polyline",e)})}get _drawPolygonTooltipInfo(){const t=this._createOperationGeometry,e=y(t)?t.full:null;if(m(e)||e.type!=="polygon")return null;const a=wt(e,this._elevationMode);return new G({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:$(a,k),viewType:this.view.type,helpMessage:et("polygon",e)})}get _drawRectangleTooltipInfo(){return m(this.drawOperation)?null:new C({tooltipOptions:this.tooltipOptions,xSize:$(this._xSize,M),ySize:$(this._ySize,M),area:$(this._fullGeometryArea,k)})}get _drawCircleTooltipInfo(){if(m(this.drawOperation))return null;const t=this.forceUniformSize;return new z({tooltipOptions:this.tooltipOptions,radius:t?$(this._circleRadius,M):null,xSize:t?null:$(this._xSize,M),ySize:t?null:$(this._ySize,M),area:$(this._fullGeometryArea,k)})}get _circleRadius(){const t=this._createOperationGeometry;return y(t)&&y(t.circle)&&y(t.circle.center)&&y(t.circle.edge)?tt(t.circle.center,t.circle.edge,this._elevationMode):null}get _xSize(){const t=this._createOperationGeometry;if(m(t)||m(t.rectangle))return null;const{midpoints:e}=t.rectangle;return y(e)?tt(e.left,e.right,this._elevationMode):null}get _ySize(){const t=this._createOperationGeometry;if(m(t)||m(t.rectangle))return null;const{midpoints:e}=t.rectangle;return y(e)?tt(e.top,e.bottom,this._elevationMode):null}get _fullGeometryArea(){const t=this._createOperationGeometry,e=y(t)?t.full:null;return m(e)||e.type!=="polygon"?null:wt(e,this._elevationMode)}get _elevationTooltipDetail(){return{mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}get _vertexTooltipElevation(){var n,p;const{tooltipOptions:t,view:e,drawOperation:a}=this;if(m(a))return this._defaultElevation;const o=(n=a.stagedVertex)!=null?n:a.lastVertex;if(m(o)||e.type==="2d")return this._defaultElevation;const r={mode:t.elevation.mode,offset:0},i=((p=te(e,o,a.elevationInfo,r))!=null?p:0)*ee(o.spatialReference);return ft(i,"meters")}get _elevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}};s([l()],h.prototype,"_createOperationGeometry",void 0),s([l()],h.prototype,"_defaultElevation",null),s([l({value:!0})],h.prototype,"centered",null),s([l({nonNullable:!0})],h.prototype,"defaultZ",void 0),s([l()],h.prototype,"drawOperation",void 0),s([l({value:!0})],h.prototype,"enabled",null),s([l({value:!0})],h.prototype,"forceUniformSize",null),s([l({constructOnly:!0})],h.prototype,"geometryType",void 0),s([l()],h.prototype,"graphic",null),s([l({constructOnly:!0})],h.prototype,"graphicProperties",void 0),s([l()],h.prototype,"graphicSymbol",null),s([l({constructOnly:!0})],h.prototype,"hasZ",void 0),s([l({constructOnly:!0,type:It})],h.prototype,"labelOptions",void 0),s([l({constructOnly:!0})],h.prototype,"mode",void 0),s([l()],h.prototype,"snappingManager",void 0),s([l()],h.prototype,"snapToScene",void 0),s([l()],h.prototype,"tooltip",void 0),s([l({constructOnly:!0,type:Vt})],h.prototype,"tooltipOptions",void 0),s([l({readOnly:!0})],h.prototype,"type",void 0),s([l({readOnly:!0})],h.prototype,"updating",null),s([l({constructOnly:!0,nonNullable:!0})],h.prototype,"view",void 0),s([l()],h.prototype,"_tooltipInfo",null),s([l()],h.prototype,"_drawPointTooltipInfo",null),s([l()],h.prototype,"_drawPolylineTooltipInfo",null),s([l()],h.prototype,"_drawPolygonTooltipInfo",null),s([l()],h.prototype,"_drawRectangleTooltipInfo",null),s([l()],h.prototype,"_drawCircleTooltipInfo",null),s([l()],h.prototype,"_circleRadius",null),s([l()],h.prototype,"_xSize",null),s([l()],h.prototype,"_ySize",null),s([l()],h.prototype,"_fullGeometryArea",null),s([l()],h.prototype,"_elevationTooltipDetail",null),s([l()],h.prototype,"_vertexTooltipElevation",null),s([l()],h.prototype,"_elevationMode",null),h=s([j("esri.views.draw.DrawGraphicTool")],h);const it="create-operation-graphic",T={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function Te(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment"}}const bt=48;function Me(t,e){return Rt(t,e,!1)}function Ie(t,e){return Rt(t,e,!0)}function Rt(t,e,a){if(t instanceof ie){if(t.operation instanceof oe)return me(t.operation,e,a),!0;if(t.operation instanceof re)return we(t.operation,e,a),!0;if(t.operation instanceof ae)return xe(t.operation,e,a),!0}return!1}function me(t,e,a=!1){const o=a?-1:1,r=ne(o*t.dx,o*t.dy,o*t.dz);q(e.origin,e.origin,r)}function we(t,e,a=!1){const o=a?-t.angle:t.angle;ct(e.basis1,e.basis1,ht,o),ct(e.basis2,e.basis2,ht,o)}function xe(t,e,a=!1){const o=a?1/t.factor1:t.factor1,r=a?1/t.factor2:t.factor2;F(e.basis1,e.basis1,o),F(e.basis2,e.basis2,r),ut(e.origin,e.origin,t.origin,t.axis1,o),ut(e.origin,e.origin,t.origin,t.axis2,r)}function Ve(t,e,a,o){o||(o=Gt());const r=L(H.get(),t[1],-t[0]),i=L(H.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),n=L(H.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=H.get();e.components.forEach(d=>d.vertices.forEach(v=>{const w=v.pos;L(p,dt(t,w),dt(r,w)),se(i,i,p),le(n,n,p)}));const c=1e-6,u=L(H.get(),n[0]-i[0]<c?a/2:0,n[1]-i[1]<c?a/2:0);return pe(i,i,u),X(n,n,u),yt(o.basis1,t,(n[0]-i[0])/2),yt(o.basis2,r,(n[1]-i[1])/2),L(o.origin,i[0]*t[0]+i[1]*r[0],i[0]*t[1]+i[1]*r[1]),X(o.origin,o.origin,o.basis1),X(o.origin,o.origin,o.basis2),o}function Ge(t,e,a,o=0,r){r||(r=Gt()),e.toRenderCoords(t.origin,a,r.origin);const i=x.get();q(i,t.origin,t.basis1),q(i,i,t.basis2),e.toRenderCoords(i,a,i);const n=x.get();q(n,t.origin,t.basis1),O(n,n,t.basis2),e.toRenderCoords(n,a,n);const p=x.get();O(p,t.origin,t.basis1),O(p,p,t.basis2),e.toRenderCoords(p,a,p);const c=x.get();O(c,t.origin,t.basis1),q(c,c,t.basis2),e.toRenderCoords(c,a,c);const u=S(x.get(),i,n,.5);O(u,u,r.origin);const d=S(x.get(),p,c,.5);O(d,r.origin,d),S(r.basis1,u,d,.5);const v=S(x.get(),c,i,.5);O(v,v,r.origin);const w=S(x.get(),n,p,.5);O(w,r.origin,w),S(r.basis2,v,w,.5);const R=gt(x.get(),r.basis1,r.basis2),f=gt(R,R,r.basis1);return ce(f,f),F(r.basis2,f,he(r.basis2,f)),F(r.basis1,r.basis1,1+o/vt(r.basis1)),F(r.basis2,r.basis2,1+o/vt(r.basis2)),ue(r),r}function ze(t,e,a,o){const r=x.get();O(r,O(r,t.origin,t.basis1),t.basis2);const i=x.get();K(i,r,t.basis1,2);const n=x.get();K(n,i,t.basis2,2);const p=x.get();K(p,r,t.basis2,2),r[2]=i[2]=n[2]=p[2]=e;const c=o?"on-the-ground":"absolute-height",u=mt(J(r,i,a,c),J(p,n,a,c)),d=mt(J(i,n,a,c),J(r,p,a,c));return m(d)||m(u)?null:[u,d]}export{Ve as A,Te as B,Ge as G,h as H,ze as M,Me as S,Ie as Y};
