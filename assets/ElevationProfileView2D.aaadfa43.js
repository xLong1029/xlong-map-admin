import{cm as l,aC as p,i as d,co as g,a4 as _,ws as u,r as w,t as c,w as o,G as r,a as n,xN as v}from"./index.a33ecea7.js";import{p as m}from"./HoveredPoints.9d8ce449.js";class y{constructor(t){this._params=t,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=l(this._highlightTask),this._highlightHandle=p(this._highlightHandle)}update(t){if(this.remove(),d(t)||!R(t))return;const i=t.layer;this._highlightTask=g(async e=>{const h=await this._params.view.whenLayerView(i);_(e);const a=u(h)?h:null;a&&(this._highlightHandle=a.highlight(t))})}}function R(s){return w(s.geometry)&&s.geometry.type==="polyline"}class k{constructor(t,i){this._handles=new c,this._inputRepresentation=new y({view:t}),this._hoveredPoints=new m({view:t}),this._handles.add([o(()=>i.viewModel.hoveredPoints,e=>this._hoveredPoints.update(e),r),o(()=>{const{state:e,highlightEnabled:h,viewModel:a}=i;return{input:a.input,state:e,highlightEnabled:h}},e=>this._updateInputRepresentation(e),r)])}destroy(){this._handles=n(this._handles),this._inputRepresentation=n(this._inputRepresentation),this._hoveredPoints=n(this._hoveredPoints)}_updateInputRepresentation({input:t,state:i,highlightEnabled:e}){i===v.Selected&&e?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}export{k as ElevationProfileView2D};
