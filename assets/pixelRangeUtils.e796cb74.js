const x=9999999e31,y=2e-7,U={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function V(t){var i;return(i=U[t])!=null?i:[-34028234663852886e22,34028234663852886e22]}function I(t,i,c){var M,d,A,E;if(t.depthCount&&t.depthCount>1)return;const{pixels:b,statistics:a,pixelType:l}=t,p=b[0].length,m=(M=t.bandMasks)!=null?M:[],h=(d=t.mask)!=null?d:new Uint8Array(p).fill(255),S=l==="f32"||l==="f64",N=V(l);let f=!1;for(let s=0;s<b.length;s++){const n=typeof i=="number"?i:i[s];if(n==null)continue;const g=(A=a==null?void 0:a[s].minValue)!=null?A:N[0],k=(E=a==null?void 0:a[s].maxValue)!=null?E:N[1];if(g>n+Number.EPSILON||k<n-Number.EPSILON)continue;const r=m[s]||new Uint8Array(p).fill(255),o=b[s],L=c==null?void 0:c.customFloatTolerance;if(S&&L!==0){let e=L;e||(e=Math.abs(n)>=x?y*Math.abs(n):l==="f32"?2**-23:Number.EPSILON);for(let u=0;u<o.length;u++)r[u]&&Math.abs(o[u]-n)<e&&(o[u]=0,r[u]=0,h[u]=0,f=!0)}else for(let e=0;e<o.length;e++)r[e]&&o[e]===n&&(o[e]=0,r[e]=0,h[e]=0,f=!0);m[s]=r}f&&(t.bandMasks=m,t.mask=h),f&&"updateStatistics"in t&&t.updateStatistics()}export{V as s,I as u};
