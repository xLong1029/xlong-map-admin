import{e as r,y as g,b as h,d as ht,q1 as it,q2 as B,ni as bt,iG as x,ad as yt,q3 as i,vs as wt,r as v,i as Tt,w as z,G as C,eN as nt,a as at,vt as Lt,vu as Mt,o9 as xt,eH as zt,oc as I,ob as vt,vv as ot,ak as M,aV as Ct,oa as kt,vw as Et,od as Ot}from"./index.a33ecea7.js";import{x as rt,F as Rt,S as Ht,k as Nt,z as Pt,c as ut,q as Vt,a as $}from"./quantityFormatUtils.f35d4e58.js";import{h as gt,p as mt,R as L,d as O,j as St}from"./euclideanLengthMeasurementUtils.a30cc4ff.js";let y=class extends ht{constructor(t){super(t),this.helpMessage=void 0}};r([g()],y.prototype,"tooltipOptions",void 0),r([g()],y.prototype,"helpMessage",void 0),y=r([h("esri.views.interactive.tooltip.SketchTooltipInfo")],y);const _="esri-tooltip",c=`${_}-content`,Ut=`${_}-table`,Wt=`${_}-help-message`;let p=class extends B{get _units(){const t=bt(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_getHelpMessage(t){var Q,tt,et,st;const{info:e}=this,{tooltipOptions:s,helpMessage:n,viewType:o}=e,a=(Q=s==null?void 0:s.visibleElements)==null?void 0:Q.helpMessage,u=t!=null?t:n,_t=o==="3d"?"helpMessages3d":"helpMessages2d";return a&&u?(st=(et=(tt=this._messagesTooltip)==null?void 0:tt.sketch)==null?void 0:et[_t])==null?void 0:st[u]:void 0}_formatScale(t){return x(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return x(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,s){return rt(this._messagesUnits,t,yt(e,this._units.length),s)}_formatRelativeLength(t){return Rt(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return Ht(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return Nt(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return rt(this._messagesUnits,t,this._units.length)}_formatArea(t){return Pt(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return x(t.value,{style:"percent"})}};r([g()],p.prototype,"info",void 0),r([g()],p.prototype,"tooltip",void 0),r([g()],p.prototype,"_units",null),r([it("esri/core/t9n/Units"),g()],p.prototype,"_messagesUnits",void 0),r([it("esri/views/interactive/tooltip/t9n/Tooltip"),g()],p.prototype,"_messagesTooltip",void 0),p=r([h("esri.views.interactive.tooltip.content.TooltipContent")],p);function m({className:t,helpMessage:e},...s){const n=s.filter(o=>!!o);return i("div",{class:wt(t,c)},n.length>0?i("div",{class:Ut},...n):null,e?i("div",{key:"help-message",class:Wt},e):null)}const k=`${_}-field`,E={base:k,title:`${k}__title`,value:`${k}__value`};let l=class extends B{render(){return i("div",{class:E.base},i("div",{class:E.title},this.title),i("div",{class:E.value},this.value))}};r([g()],l.prototype,"title",void 0),r([g()],l.prototype,"value",void 0),l=r([h("esri.views.interactive.tooltip.support.TooltipField")],l);const At={base:`${_}-value-by-value`};let d=class extends B{constructor(){super(...arguments),this.divider="\xD7"}render(){return i("div",{class:At.base},i("span",null,this.left),i("span",null,this.divider),i("span",null,this.right))}};r([g()],d.prototype,"left",void 0),r([g()],d.prototype,"divider",void 0),r([g()],d.prototype,"right",void 0),d=r([h("esri.views.interactive.tooltip.support.ValueByValue")],d);const Dt={base:`${c} ${`${c}--draw-rectangle`}`};let R=class extends p{render(){const{area:t,radius:e,xSize:s,ySize:n,tooltipOptions:o}=this.info,{visibleElements:a}=o,u=this._messagesTooltip.sketch;return i(m,{className:Dt.base,helpMessage:this._getHelpMessage()},a.radius&&v(e)&&i(l,{title:u.radius,value:this._formatLength(e)}),a.size&&v(s)&&v(n)&&i(l,{title:u.size,value:i(d,{left:this._formatLength(s),right:this._formatLength(n)})}),a.area&&i(l,{title:u.area,value:this._formatArea(t)}))}};R=r([h("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],R);const Zt={base:`${c}--draw-point`};let H=class extends p{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:s}=e,n=this._messagesTooltip.sketch;return i(m,{className:Zt.base,helpMessage:this._getHelpMessage()},s.elevation&&i(l,{title:n.elevation,value:this._formatVerticalLength(t)}))}};H=r([h("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],H);const qt={base:`${c} ${`${c}--draw-polygon`}`};let N=class extends p{render(){const{area:t,elevation:e,tooltipOptions:s,viewType:n}=this.info,{visibleElements:o}=s,a=this._messagesTooltip.sketch;return i(m,{className:qt.base,helpMessage:this._getHelpMessage()},o.elevation&&n!=="2d"&&i(l,{title:a.elevation,value:this._formatVerticalLength(e)}),o.area&&i(l,{title:a.area,value:this._formatArea(t)}))}};N=r([h("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],N);const Ft={base:`${c} ${`${c}--draw-polyline`}`};let P=class extends p{render(){const{elevation:t,totalLength:e,tooltipOptions:s,viewType:n}=this.info,{visibleElements:o}=s,a=this._messagesTooltip.sketch;return i(m,{className:Ft.base,helpMessage:this._getHelpMessage()},o.elevation&&n!=="2d"&&i(l,{title:a.elevation,value:this._formatVerticalLength(t)}),o.totalLength&&i(l,{title:a.totalLength,value:this._formatLength(e)}))}};P=r([h("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],P);const Gt={base:`${c} ${`${c}--draw-rectangle`}`};let V=class extends p{render(){const{area:t,xSize:e,ySize:s,tooltipOptions:n}=this.info,{visibleElements:o}=n,a=this._messagesTooltip.sketch;return i(m,{className:Gt.base,helpMessage:this._getHelpMessage()},o.size&&v(e)&&v(s)&&i(l,{title:a.size,value:i(d,{left:this._formatLength(e),right:this._formatLength(s)})}),o.area&&i(l,{title:a.area,value:this._formatArea(t)}))}};V=r([h("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],V);const jt={base:`${c} ${`${c}--extent-rotate`}`};let S=class extends p{render(){const{angle:t,tooltipOptions:e}=this.info,{visibleElements:s}=e,n=this._messagesTooltip.sketch;return i(m,{className:jt.base,helpMessage:this._getHelpMessage()},s.rotation&&i(l,{title:n.rotation,value:this._formatRelativeOrientation(t)}))}};S=r([h("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],S);const Xt={base:`${c} ${`${c}--extent-scale`}`};let U=class extends p{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:Xt.base,helpMessage:this._getHelpMessage()},e.size&&i(l,{title:s.size,value:i(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&i(l,{title:s.scale,value:i(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};U=r([h("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],U);const Yt={base:`${c} ${`${c}--reshape-edge-offset`}`};let W=class extends p{render(){const{area:t,distance:e,totalLength:s,tooltipOptions:n}=this.info,{visibleElements:o}=n,a=this._messagesTooltip.sketch;return i(m,{className:Yt.base,helpMessage:this._getHelpMessage()},o.distance&&i(l,{title:a.distance,value:this._formatRelativeLength(e)}),o.area&&v(t)&&i(l,{title:a.area,value:this._formatArea(t)}),o.totalLength&&v(s)&&i(l,{title:a.totalLength,value:this._formatLength(s)}))}};W=r([h("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],W);const Bt={base:`${c} ${`${c}--transform-absolute`}`};let A=class extends p{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:Bt.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientationEnabled&&i(l,{title:s.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.sizeEnabled&&i(l,{title:s.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};A=r([h("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],A);const It={base:`${c} ${`${c}--transform-rotate`}`};let D=class extends p{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:It.base,helpMessage:this._getHelpMessage()},e.rotation&&i(l,{title:s.rotation,value:Vt(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&i(l,{title:s.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}))}};D=r([h("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],D);const Jt={base:`${c} ${`${c}--transform-scale`}`};let Z=class extends p{render(){const{scale:t,size:e,sizePrecision:s,sizeUnit:n,tooltipOptions:o}=this.info,{visibleElements:a}=o,u=this._messagesTooltip.sketch;return i(m,{className:Jt.base,helpMessage:this._getHelpMessage()},a.scale&&i(l,{title:u.scale,value:this._formatPercentage(t)}),a.size&&i(l,{title:u.size,value:this._formatLength(e,n,s)}))}};Z=r([h("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],Z);const Kt={base:`${c} ${`${c}--translate-graphic`}`};let q=class extends p{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:Kt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:s.distance,value:this._formatLength(t.distance)}))}};q=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],q);const Qt={base:`${c} ${`${c}--translate-graphic-xy`}`};let F=class extends p{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:Qt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:s.distance,value:this._formatRelativeLength(t.distance)}))}};F=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],F);const te={base:`${c} ${`${c}--translate-graphic-z`}`};let G=class extends p{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,s=this._messagesTooltip.sketch;return i(m,{className:te.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:s.distance,value:this._formatRelativeVerticalLength(t.distance)}))}};G=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],G);const ee={base:`${c} ${`${c}--translate-vertex`}`};let j=class extends p{render(){const{distance:t,elevation:e,area:s,totalLength:n,tooltipOptions:o}=this.info,{visibleElements:a}=o,u=this._messagesTooltip.sketch;return i(m,{className:ee.base,helpMessage:this._getHelpMessage()},a.distance&&i(l,{title:u.distance,value:this._formatLength(t)}),a.elevation&&v(e)&&i(l,{title:u.elevation,value:this._formatVerticalLength(e)}),a.area&&v(s)&&i(l,{title:u.area,value:this._formatArea(s)}),a.totalLength&&v(n)&&i(l,{title:u.totalLength,value:this._formatLength(n)}))}};j=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],j);const se={base:`${c} ${`${c}--translate-vertex`}`};let X=class extends p{render(){const{area:t,distance:e,elevation:s,totalLength:n,tooltipOptions:o}=this.info,{visibleElements:a}=o,u=this._messagesTooltip.sketch;return i(m,{className:se.base,helpMessage:this._getHelpMessage()},a.distance&&i(l,{title:u.distance,value:this._formatRelativeLength(e)}),a.elevation&&v(s)&&i(l,{title:u.elevation,value:this._formatVerticalLength(s)}),a.area&&v(t)&&i(l,{title:u.area,value:this._formatArea(t)}),a.totalLength&&v(n)&&i(l,{title:u.totalLength,value:this._formatLength(n)}))}};X=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],X);const ie={base:`${c} ${`${c}--translate-vertex`}`};let Y=class extends p{render(){const{distance:t,elevation:e,tooltipOptions:s}=this.info,{visibleElements:n}=s,o=this._messagesTooltip.sketch;return i(m,{className:ie.base,helpMessage:this._getHelpMessage()},n.distance&&i(l,{title:o.distance,value:this._formatRelativeVerticalLength(t)}),n.elevation&&v(e)&&i(l,{title:o.elevation,value:this._formatVerticalLength(e)}))}};Y=r([h("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],Y);function ne(t,e){if(Tt(e))return null;const s=document.createElement("div");switch(e.type){case"draw-point":return new H({tooltip:t,info:e,container:s});case"draw-polygon":return new N({tooltip:t,info:e,container:s});case"draw-polyline":return new P({tooltip:t,info:e,container:s});case"draw-rectangle":return new V({tooltip:t,info:e,container:s});case"draw-circle":return new R({tooltip:t,info:e,container:s});case"extent-rotate":return new S({tooltip:t,info:e,container:s});case"extent-scale":return new U({tooltip:t,info:e,container:s});case"transform-absolute":return new A({tooltip:t,info:e,container:s});case"transform-rotate":return new D({tooltip:t,info:e,container:s});case"transform-scale":return new Z({tooltip:t,info:e,container:s});case"translate-graphic":return new q({tooltip:t,info:e,container:s});case"translate-graphic-z":return new G({tooltip:t,info:e,container:s});case"translate-graphic-xy":return new F({tooltip:t,info:e,container:s});case"translate-vertex":return new j({tooltip:t,info:e,container:s});case"translate-vertex-z":return new Y({tooltip:t,info:e,container:s});case"translate-vertex-xy":return new X({tooltip:t,info:e,container:s});case"reshape-edge-offset":return new W({tooltip:t,info:e,container:s})}}const ae={base:`${_}`};let f=class extends ht{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(ae.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([z(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),nt(e,s=>s.appendChild(t))},C),z(()=>this.info,(e,s)=>{v(this._contentWidget)&&v(e)&&v(s)&&e.type===s.type?this._contentWidget.info=e:(this._contentWidget=at(this._contentWidget),nt(ne(this,e),n=>{this._contentWidget=n,n.container&&t.appendChild(n.container)}))},C),z(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),oe,C)])}destroy(){this._contentWidget=at(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function oe({container:t,contentWidget:e,screenPoint:s}){const{style:n}=t;if(v(s)&&v(e)){n.display="block";const o=Lt(t),a=`translate(${Math.round(s.x)+lt[0]*(o?-1:1)}px, ${Math.round(s.y)+lt[1]}px)`;n.transform=o?`translate(-100%, 0) ${a}`:a}else n.display="none"}r([g({nonNullable:!0})],f.prototype,"view",void 0),r([g()],f.prototype,"info",void 0),r([g()],f.prototype,"_contentContainer",void 0),r([g()],f.prototype,"_contentWidget",void 0),r([g()],f.prototype,"_screenPoint",null),f=r([h("esri.views.interactive.tooltip.Tooltip")],f);const lt=[20,20];function dt(t,e,s,n,...o){return Mt(t)&&xt(t)?e.apply(void 0,o):zt(t)?s.apply(void 0,o):n.apply(void 0,o)}function ft(t){const{spatialReference:e}=t;return dt(e,pe,he,ve,t)}function $t(t,e){if(!Ct(t.spatialReference,e.spatialReference))return null;const{spatialReference:s}=t;return w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,T[0]=e.x,T[1]=e.y,T[2]=e.hasZ?e.z:0,J(w,T,s)}function J(t,e,s){return dt(s,re,le,ce,t,e,s)}function re(t,e,s){return $(I(K,t,e,s).distance,"meters")}function le(t,e,s){return $(vt(ue(t,e,s),"meters"),"meters")}function ce(t,e,s){return ot(t,s,ct)&&ot(e,s,pt)?$(I(K,ct,pt).distance,"meters"):null}function pe(t){return $(kt([t],"meters")[0],"meters")}function he(t){return $(vt(t,"meters"),"meters")}function ve(t){const e=[];if(!Et(t,e))return null;let s=0;for(const n of e){let o=0;for(let a=1;a<n.length;++a)o+=I(K,n[a-1],n[a]).distance;s+=o}return $(s,"meters")}function ue(t,e,s){return{type:"polyline",spatialReference:s,paths:[[[...t],[...e]]]}}const K=new Ot,w=M(),T=M(),ct=M(),pt=M();function fe(t,e){return b(mt,ft,gt,e,t)}function $e(t,e,s,n){return b(St,J,O,n,t,e,s)}function _e(t,e,s){return b(L,$t,L,s,t,e)}function be(t,e,s,n){return b(O,J,O,n,t,e,s)}function ye(t){return b(mt,ft,gt,"on-the-ground",t)}function we(t,e){return b(L,$t,L,"on-the-ground",t,e)}function b(t,e,s,n,...o){if(n==="on-the-ground"){const a=e.apply(void 0,o);return v(a)?a:s.apply(void 0,o)}return t.apply(void 0,o)}export{_e as a,f as b,ye as c,$e as d,be as g,we as h,J as l,fe as m,dt as r,y as t};
